
# idioms
# (âŠ£/+`)t=ğ•©       get indices of all items of type ğ•©

# t0: none, 
# tf: fragment
# tn: name
# to: open braces
# tc: close braces
# th: hash
# tl: slash
# ts: start
# te: end
# tt: tag
# td: dot
t0â€¿tfâ€¿tnâ€¿toâ€¿tcâ€¿thâ€¿tlâ€¿tsâ€¿teâ€¿ttâ€¿tdâ†â†•11
Renderâ‡{
  # c: character values
  # p: parent vector
  # t: type vector
  # t: reference vector
  # n: name string values
  # f: fragment string values
  # tmp variables. z mask flag
  câ†ğ•©â‹„pâ†tâ†râ†nâ†fâ†@â‹„zâ†@ 

  tâ†©âˆ¨Â´toâ€¿tcâ€¿thâ€¿tl(âŠ£Ã—câŠ¸=Â¨)"{}#/"                                                   # tokenize character types
  tâŒˆâŸœ(tnÃ—(+`toâŠ¸=-=âŸœtc))â†©â‹„nâ†©âŠâŸœcÂ¨1â†“âŠ”âˆ§âŸœ(+`Â»âŠ¸<)âˆ˜=âŸœtn tâ‹„zâ†©Â¬â‰ âŸœ(Â«âŠ¸<)=âŸœtn tâ‹„t zâŠ¸/â†©â‹„c zâŠ¸/â†© # mark and compress names
  tâŒˆâŸœ(tfÃ—=âŸœt0)â†©         â‹„fâ†©âŠâŸœcÂ¨1â†“âŠ”âˆ§âŸœ(+`Â»âŠ¸<)âˆ˜=âŸœtf tâ‹„zâ†©Â¬â‰ âŸœ(Â«âŠ¸<)=âŸœtf tâ‹„t zâŠ¸/â†©â‹„c zâŠ¸/â†© # mark and compress fragments
  {zâ†©(toâŠ¸=âˆ˜Â»âˆ§=âŸœğ•©)t â‹„ t(Â¬âˆ˜âŠ¢/âŠ£âˆ˜âŒˆâŸœ(tsâŠ¸Ã—Â«âˆ˜âŠ¢))âŸœzËœâ†© â‹„ cÂ¬âˆ˜zâŠ¸/â†©}Â¨thâ€¿tl                    # mark and compress start, close

  # TODO compress close brackets
  # TODO remove open brackets and create reference nodes

  â€¢Show fâ€¿n
  â€¢Show [c,t]

}
